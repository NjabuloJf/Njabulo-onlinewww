<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DML TECH â€“ Search & Play</title>
    <style>
        /* Minimal layout â€“ no colors (add your own later) */
        * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }
        body { min-height:100vh; padding:20px; }
        .container { max-width:1200px; margin:0 auto; }
        header { text-align:center; margin-bottom:30px; }
        h1 { font-size:2.5rem; margin-bottom:10px; }
        .subtitle { font-weight:300; margin-bottom:20px; }
        .search-box { margin:20px 0; }
        #searchTerm { padding:10px 15px; width:60%; border:1px solid #ccc; border-radius:30px; margin-right:10px; }
        .refresh-btn { padding:10px 20px; border:none; border-radius:30px; cursor:pointer; margin:5px; }
        .songs-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:25px; margin-top:30px; }
        .song-card { border:1px solid #ddd; border-radius:8px; overflow:hidden; }
        .thumbnail { width:100%; height:170px; object-fit:cover; }
        .song-info { padding:15px; }
        .song-title { font-size:1.1rem; margin-bottom:5px; }
        .song-artist { font-size:.9rem; color:#666; margin-bottom:10px; }
        .buttons { display:flex; gap:5px; }
        .btn { padding:8px 12px; border:none; border-radius:4px; cursor:pointer; }
        .play-btn { background:#007bff; color:#fff; }
        footer { text-align:center; margin-top:50px; font-size:.9rem; }
        .loading { text-align:center; padding:20px; }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>DML TECH</h1>
        <p class="subtitle">Search Copyrightâ€‘Free Music</p>
        <div class="search-box">
            <input type="text" id="searchTerm" placeholder="Enter song title or artist">
            <button class="refresh-btn" onclick="searchSongs()">ðŸ”Ž Search</button>
            <button class="refresh-btn" onclick="fetchRandomSongs(4)">âŸ³ Random</button>
        </div>
    </header>

    <div id="loading" class="loading">Loading tracksâ€¦</div>
    <div class="songs-grid" id="songsGrid"></div>
    <footer>Â© 2025 All Rights Reserved â€“ DML TECH</footer>
</div>

<script>
/* ---------- CONFIG ---------- */
const API_KEY = 'YOUR_GOOGLE_API_KEY';      // â† replace
const CSE_ID  = 'YOUR_CUSTOM_SEARCH_ENGINE_ID'; // â† replace
/* ---------------------------- */

function searchSongs() {
    const query = document.getElementById('searchTerm').value.trim();
    if (!query) return;

    const grid = document.getElementById('songsGrid');
    const loading = document.getElementById('loading');
    loading.style.display = 'block';
    grid.innerHTML = '';

    const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CSE_ID}&q=${encodeURIComponent(query)}&num=4`;

    fetch(url)
        .then(r => r.json())
        .then(data => {
            loading.style.display = 'none';
            if (!data.items) {
                grid.innerHTML = '<p style="text-align:center;">No results found.</p>';
                return;
            }

            data.items.forEach(item => {
                const title = item.title;
                const link = item.link;
                const thumb = (item.pagemap.cse_thumbnail && item.pagemap.cse_thumbnail[0].src)
                              ? item.pagemap.cse_thumbnail[0].src
                              : 'https://via.placeholder.com/300x170?text=No+Image';

                const card = document.createElement('div');
                card.className = 'song-card';
                card.innerHTML = `
                    <img src="${thumb}" alt="${title}" class="thumbnail">
                    <div class="song-info">
                        <h3 class="song-title">${title}</h3>
                        <p class="song-artist">${item.displayLink}</p>
                        <div class="buttons">
                            <button class="btn play-btn" onclick="playFromLink('${link}')">â–¶ Play</button>
                        </div>
                    </div>`;
                grid.appendChild(card);
            });
        })
        .catch(err => {
            loading.style.display = 'none';
            console.error(err);
            grid.innerHTML = '<p style="text-align:center;color:red;">Search failed.</p>';
        });
}

function playFromLink(url) {
    window.open(url, '_blank');
}

/* ---------- OPTIONAL RANDOM FETCH ---------- */
function fetchRandomSongs(count) {
    const grid = document.getElementById('songsGrid');
    const loading = document.getElementById('loading');
    loading.style.display = 'block';
    grid.innerHTML = '';

    const promises = Array.from({length: count}, () =>
        fetch('https://ncs.bwmxmd.online/random')
            .then(r => r.json())
            .catch(() => null)
    );

    Promise.all(promises).then(results => {
        loading.style.display = 'none';
        results.forEach(res => {
            if (res && res.status === 'success' && res.data.length) {
                const song = res.data[0];
                const card = document.createElement('div');
                card.className = 'song-card';
                card.innerHTML = `
                    <img src="${song.links.thumbnail}" alt="${song.title}" class="thumbnail">
                    <div class="song-info">
                        <h3 class="song-title">${song.title}</h3>
                        <p class="song-artist">${song.artist}</p>
                        <div class="buttons">
                            <button class="btn play-btn" onclick="playSong('${song.id}')">â–¶ Play</button>
                        </div>
                    </div>`;
                grid.appendChild(card);
            }
        });
    });
}

/* Simple play function for random songs â€“ replace with your original logic if needed */
function playSong(songId) {
    const audio = new Audio(`https://example.com/track/${songId}.mp3`);
    audio.play();
}
</script>
</body>
</html>
